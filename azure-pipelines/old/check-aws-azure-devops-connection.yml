name: 'check-aws-connection-$(Date:yyyy-MM-dd)$(Rev:.r)'

trigger: none
pr: none

resources:
  webhooks:
    - webhook: TerraformApplied
      connection: TerraformAppliedServiceConnection

pool:
  name: Local

variables:
  TF_VERSION: "1.13.3"
  TF_WORKING_DIR: "terraform/aws/projects/eks-automode"

stages:
  - stage: CheckConnection
    displayName: Check webhook connection with THC
    jobs:
    - job: Check
      steps:
      - bash: |
          echo "Got event ${{ parameters.TerraformApplied.resource.status }}"