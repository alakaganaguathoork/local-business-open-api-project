name: 'eks-$(Date:yyyy-MM-dd)$(Rev:.r)'

trigger:
  branches:
    include:
      - main
  paths:
    include:
      - azure-pipelines/eks.yml

pool:
  name: 'Local'

variables:
  - name: projectRoot
    value: $(System.DefaultWorkingDirectory)

stages:
  - stage: EchoJobRoot
    displayName: Show job root
    jobs:
      - job: Deploy
        workspace:
          clean: all
        displayName: Deploy Application
        steps:
          
        - task: Bash@3
          displayName: 'Debug â€” Show working dir'        
          inputs:
            targetType: inline
            script: |
              echo 'Working directory from variables: $(projectRoot)'
        