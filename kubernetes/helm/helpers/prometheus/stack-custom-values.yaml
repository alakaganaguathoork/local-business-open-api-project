alertmanager:
  service:
    type: LoadBalancer
  servicePerReplica:
    type: LoadBalancer

prometheusOperator:
  admissionWebhooks:
    deployment:
      service:
        type: LoadBalancer
  service:
    type: LoadBalancer

prometheus:
  service:
    type: LoadBalancer
  servicePerReplica:
    type: LoadBalancer
  prometheusSpec:
    additionalScrapeConfigs:
      - job_name: 'app'
        static_configs:
          - targets: ['10.98.201.138:8080']
            labels:
              group: "app"
        metrics_path: /metrics

defaultRules:
  create: false

additionalPrometheusRulesMap:
  node-exporter-alert:
    groups:
      - name: node_exporter_alert
        rules:
          - record: job_instance_mode:node_cpu_seconds:avg_rate5m
            expr: avg by (job, instance, mode) (rate(node_cpu_seconds_total[5m]))
      
          - alert: InstanceDown
            expr: up == 0
            for: 5m
            labels:
              severity: instance_down
            annotations:
              description: '{{ $labels.instance }} of job {{ $labels.job }} has been down for more than 5 minutes.'
              summary: 'Instance {{ $labels.instance }} is down'
